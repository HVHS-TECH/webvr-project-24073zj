<!DOCTYPE html>
<html>
  <head>
    <title>Enviroment Thing</title>
    <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
    <script src="https://rawgit.com/donmccurdy/aframe-extras/v2.1.1/dist/aframe-extras.loaders.min.js"></script> 
  </head>
    <body>
    <a-scene loading-screen="dotsColor:; backgroundColor:">
      <a-sky color="lightblue"></a-sky>
      <!--the "rig" is a thing that wraps around your camera to make the animations relative. Zac Johnston.-->
      <a-entity id="rig" position="40 2 10" rotation="0 90 0"
        animation__down="
        property: position;
        from: 0 2.5 0;
        to: 0 1.6 0;
        dur: 1000;
        dir: normal;
        loop: 1;
        startEvents: down-pressed;
        "
        animation__up="
        property: position;
        from: 0 1.6 0;
        to: 0 2.5 0;
        dur: 1000;
        dir: normal;
        loop: 1;
        startEvents: up-pressed;
        "
        animation__superdown="
        property: position;
        from: 0 10 0;
        to: 0 1.6 0;
        dur: 4000;
        dir: normal;
        loop: 1;
        startEvents: superdown-pressed;
        "
        animation__superup="
        property: position;
        from: 0 1.6 0;
        to: 0 10 0;
        dur: 4000;
        dir: normal;
        loop: 1;
        startEvents: superup-pressed;
        "
      >
        <a-entity id="cam" camera wasd-controls="acceleration: 20" look-controls></a-entity>
      </a-entity>

      <a-assets>
        <a-asset-item id="mainenviroment" src="enviromentv3.ply"></a-asset-item>
      </a-assets>

      <a-plane id="land" position="-120 0.57 0" rotation="-90 0 0" scale="300 300" color="#357635"></a-plane>
      <a-plane id="sea" position="160 0.57 0" rotation="-90 0 0" scale="260 380" color="#23cbce"></a-plane>

      <a-entity id="house1" ply-model="src: house1.ply;" position="12.4 0.9 6.9" rotation="-89 139.3 0" scale="3 3 3"></a-entity>
      <a-entity id="house2" ply-model="src: house1.ply;" position="3.5 0.9 4.4" rotation="-89 -62.3 0" scale="3 3 3"></a-entity>
      <a-entity id="house3" ply-model="src: house3.ply;" position="12.7 0.9 -7.7" rotation="-89 -127.6 0" scale="3 3 3"></a-entity>

      <a-entity id="tree1" ply-model="src: Tree1.ply" position="20 0.9 14" rotation="-90 0 0" scale="2 2 2"></a-entity>
      <a-entity id="tree2" ply-model="src: Tree1.ply" position="20 0.9 14" rotation="-90 20 0" scale="2 2 2"></a-entity>
      <a-entity id="tree3" ply-model="src: Tree1.ply" position="20 0.9 14" rotation="-90 0 0" scale="2 2 2"></a-entity>
      <a-entity id="tree4" ply-model="src: Tree1.ply" position="20 0.9 14" rotation="-90 0 0" scale="2 2 2"></a-entity>
      <a-entity id="tree5" ply-model="src: Tree1.ply" position="20 0.9 14" rotation="-90 0 0" scale="2 2 2"></a-entity>
      <a-entity id="tree6" ply-model="src: Tree1.ply" position="20 0.9 14" rotation="-90 0 0" scale="2 2 2"></a-entity>

      <a-entity id="palmTree1" ply-model="src: palmTree.ply;" position="29.5 0.1 34.7" rotation="-90 33.7 0" scale="3 3 3"></a-entity>
      <a-entity id="palmTree2" ply-model="src: palmTree.ply;" position="31.3 0.6 28.5" rotation="270 0 0" scale="3 3 3"></a-entity>
      <a-entity id="palmTree3" ply-model="src: palmTree.ply;" position="29.4 0.9 20." rotation="270 0 0" scale="3 3 3"></a-entity>
      <a-entity id="palmTree4" ply-model="src: palmTree.ply;" position="26.8 0.9 13" rotation="270 0 0" scale="3 3 3"></a-entity>
      <a-entity id="palmTree5" ply-model="src: palmTree.ply;" position="25.6 0.9 5.3" rotation="270 0 0" scale="3 3 3"></a-entity>
      <a-entity id="palmTree6" ply-model="src: palmTree.ply;" position="25.4 0.9 -3.4" rotation="270 0 0" scale="3 3 3"></a-entity>
      <a-entity id="palmTree7" ply-model="src: palmTree.ply;" position="25.2 0.9 -12.1" rotation="270 0 0" scale="3 3 3"></a-entity>
      <a-entity id="palmTree8" ply-model="src: palmTree.ply;" position="28 0.9 -22.2" rotation="270 0 0" scale="3 3 3"></a-entity>
      <a-entity id="palmTree9" ply-model="src: palmTree.ply;" position="30.1 0.9 -29.2" rotation="270 0 0" scale="3 3 3"></a-entity>
      
      <a-entity id="enviroment"
      ply-model="src: #mainenviroment;"
      position="0 0 0"
      rotation="270 0 0"
      scale="3 3 3"
      ></a-entity>
    </a-scene>

    <script> //put this inside body but at very bottom. Zac Johnston.
      const myObject = document.getElementById("rig");
      const animationUp = myObject.getAttribute("animation__up");
      const animationDown = myObject.getAttribute("animation__down");

      document.addEventListener('keydown', (event) => {
      if (event.key === 'q') {
      myObject.emit('up-pressed');
      }
      });
      document.addEventListener('keydown', (event) => {
      if (event.key === 'e') {
      myObject.emit('down-pressed');
      }
      });
      document.addEventListener('keydown', (event) => {
      if (event.key === 'i') {
      myObject.emit('superup-pressed');
      }
      });
      document.addEventListener('keydown', (event) => {
      if (event.key === 'k') {
      myObject.emit('superdown-pressed');
      }
      });
    </script>
  </body>
</html>